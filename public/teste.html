<!-- Cliente -->
<html>

<head>
    <title>Chat em tempo real</title>
</head>

<body>
    <h1>Chat em tempo real</h1>
    <div id="messages"></div>
    <form id="form">
        <input id="input" type="text" placeholder="Digite sua mensagem" />
        <button id="button" type="submit">Enviar</button>
    </form>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        // Criar um cliente Socket.io que se conecta ao servidor
        const socket = io();

        // Selecionar os elementos do DOM
        const messages = document.getElementById('messages');
        const form = document.getElementById('form');
        const input = document.getElementById('input');
        const button = document.getElementById('button');

        // Definir um evento de submit para o formulário
        form.addEventListener('submit', (event) => {
            event.preventDefault();

            // Obter o valor do input
            const message = input.value;

            // Enviar a mensagem para o servidor usando o socket
            socket.emit('message', message);

            // Limpar o input e desabilitar o botão
            input.value = '';
            button.disabled = true;
        });

        // Definir um evento de input para o input
        input.addEventListener('input', () => {
            // Habilitar ou desabilitar o botão de acordo com o valor do input
            button.disabled = !input.value;
        });

        // Definir um evento de mensagem para o socket
        socket.on('message', (data) => {
            // Criar um elemento p com a mensagem recebida
            const p = document.createElement('p');
            p.textContent = data;

            // Adicionar o elemento p ao div de mensagens
            messages.appendChild(p);

            // Rolar o div de mensagens para baixo
            messages.scrollTop = messages.scrollHeight;
        });
    </script>


<!-- CÓDIGO COM SERVIDORES SEPARADOS
    <script>
        // Cliente
        // Criar um cliente Socket.io que se conecta ao servidor
        const socket = io();

        // Selecionar os elementos do DOM
        const messages = document.getElementById('messages');
        const form = document.getElementById('form');
        const input = document.getElementById('input');
        const button = document.getElementById('button');
        const rooms = document.getElementById('rooms');

        // Definir um evento de change para o select de salas
        rooms.addEventListener('change', () => {
            // Obter o valor do select
            const room = rooms.value;

            // Entrar na sala usando o socket
            socket.emit('join', room);
        });

        // Definir um evento de submit para o formulário
        form.addEventListener('submit', (event) => {
            event.preventDefault();

            // Obter o valor do input e do select
            const message = input.value;
            const room = rooms.value;

            // Enviar a mensagem e a sala para o servidor usando o socket
            socket.emit('message', { message, room });

            // Limpar o input e desabilitar o botão
            input.value = '';
            button.disabled = true;
        });

        // Definir um evento de input para o input
        input.addEventListener('input', () => {
            // Habilitar ou desabilitar o botão de acordo com o valor do input
            button.disabled = !input.value;
        });

        // Definir um evento de mensagem para o socket
        socket.on('message', (data) => {
            // Criar um elemento p com a mensagem recebida
            const p = document.createElement('p');
            p.textContent = data;

            // Adicionar o elemento p ao div de mensagens
            messages.appendChild(p);

            // Rolar o div de mensagens para baixo
            messages.scrollTop = messages.scrollHeight;
        });

    </script>
-->
</body>

</html>